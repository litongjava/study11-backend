<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¾Ÿå…”èµ›è·‘</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4eaf5 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .main-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: 20px;
        }
        .animation-container {
            flex: 1;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            position: relative;
            overflow: hidden;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .subtitle-container {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            margin: 5px 0;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .subtitle {
            color: black;
            border-radius: 30px;
            font-size: 1.4rem;
            max-width: 80%;
            text-align: center;
            line-height: 1.5;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .subtitle.active {
            opacity: 1;
        }
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 5px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }
        .control-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: #3498db;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        .control-btn:hover {
            background: #2980b9;
            transform: scale(1.1);
        }
        .control-btn:active {
            transform: scale(0.95);
        }
        .control-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }
        .progress-container {
            flex: 1;
            max-width: 400px;
            margin: 0 20px;
            display: flex;
            align-items: center;
        }
        .progress-bar {
            flex: 1;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s ease;
        }
        .progress-handle {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: white;
            border: 3px solid #3498db;
            border-radius: 50%;
            cursor: grab;
            left: 0%;
        }
        .progress-handle:active {
            cursor: grabbing;
        }
        .time-display {
            min-width: 100px;
            text-align: center;
            font-size: 0.9rem;
            color: #2c3e50;
            font-weight: 500;
        }
        .footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        .loading.active {
            display: flex;
        }
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(52, 152, 219, 0.2);
            border-radius: 50%;
            border-top-color: #3498db;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 15px;
        }
        .loading-text {
            font-size: 1.2rem;
            color: #3498db;
        }
        .cache-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(46, 204, 113, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            display: none;
        }
        .cache-indicator.active {
            display: block;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .story-scene {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .text-panel {
            position: absolute;
            left: 20px;
            top: 20px;
            width: 40%;
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            font-size: 1.1rem;
            line-height: 1.6;
            color: #2c3e50;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .text-panel.active {
            opacity: 1;
        }
        .scene-title {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.8rem;
            color: #2c3e50;
            font-weight: 300;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .scene-title.active {
            opacity: 1;
        }
        @media (max-width: 768px) {
            .animation-container {
                padding: 20px;
                min-height: 300px;
            }
            
            .subtitle {
                font-size: 1rem;
                padding: 12px 20px;
            }
            
            .control-btn {
                width: 45px;
                height: 45px;
            }
            
            .text-panel {
                width: 90%;
                left: 5%;
                right: 5%;
                font-size: 0.9rem;
            }
            
            .time-display {
                min-width: 80px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="animation-container">
            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                <div class="loading-text">åŠ è½½ä¸­...</div>
            </div>
            <div class="cache-indicator" id="cacheIndicator">ä½¿ç”¨ç¼“å­˜éŸ³é¢‘</div>
            
            <svg class="story-scene" viewBox="0 0 800 400">
                <!-- èƒŒæ™¯å®šä¹‰ -->
                <defs>
                    <!-- å¤©ç©ºæ¸å˜ -->
                    <linearGradient id="skyGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#87CEEB;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#E0F7FA;stop-opacity:1" />
                    </linearGradient>
                    
                    <!-- è‰åœ°æ¸å˜ -->
                    <linearGradient id="grassGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#8BC34A;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#689F38;stop-opacity:1" />
                    </linearGradient>
                    
                    <!-- é“è·¯æ¸å˜ -->
                    <linearGradient id="roadGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#E0E0E0;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#BDBDBD;stop-opacity:1" />
                    </linearGradient>
                    
                    <!-- å…”å­æ¸å˜ -->
                    <linearGradient id="rabbitGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#F5F5F5;stop-opacity:1" />
                    </linearGradient>
                    
                    <!-- ä¹Œé¾Ÿæ¸å˜ -->
                    <linearGradient id="turtleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#388E3C;stop-opacity:1" />
                    </linearGradient>
                    
                    <!-- æ ‘æœ¨æ¸å˜ -->
                    <linearGradient id="treeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#2E7D32;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#1B5E20;stop-opacity:1" />
                    </linearGradient>
                </defs>
                
                <!-- å¤©ç©ºèƒŒæ™¯ -->
                <rect width="800" height="250" fill="url(#skyGradient)" />
                
                <!-- è‰åœ° -->
                <rect y="250" width="800" height="150" fill="url(#grassGradient)" />
                
                <!-- é“è·¯ -->
                <path d="M0,300 Q400,280 800,300 L800,350 Q400,330 0,350 Z" fill="url(#roadGradient)" />
                
                <!-- é“è·¯ä¸­çº¿ -->
                <path d="M0,325 Q400,305 800,325" stroke="#FFEB3B" stroke-width="3" stroke-dasharray="20,10" fill="none" />
                
                <!-- èµ·ç‚¹çº¿ -->
                <line x1="50" y1="280" x2="50" y2="370" stroke="#F44336" stroke-width="3" />
                <text x="50" y="275" text-anchor="middle" fill="#F44336" font-size="16" font-weight="bold">èµ·ç‚¹</text>
                
                <!-- ç»ˆç‚¹çº¿ -->
                <line x1="750" y1="280" x2="750" y2="370" stroke="#F44336" stroke-width="3" />
                <text x="750" y="275" text-anchor="middle" fill="#F44336" font-size="16" font-weight="bold">ç»ˆç‚¹</text>
                
                <!-- æ–‡æœ¬é¢æ¿ -->
                <foreignObject x="20" y="20" width="350" height="200" class="text-panel" id="textPanel">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="padding: 10px;">
                        <p id="textContent"></p>
                    </div>
                </foreignObject>
                
                <!-- åœºæ™¯æ ‡é¢˜ -->
                <text x="800" y="30" text-anchor="middle" fill="#2c3e50" font-size="24" font-weight="300" class="scene-title" id="sceneTitle">
                    é¾Ÿå…”èµ›è·‘
                </text>
                
                <!-- åœºæ™¯å…ƒç´  -->
                <g id="visualPanel">
                    <!-- åœºæ™¯1: æ•…äº‹ä»‹ç» -->
                    <g id="scene1">
                        <!-- æ ‘æœ¨ -->
                        <rect x="100" y="200" width="30" height="80" fill="#795548" />
                        <ellipse cx="115" cy="180" rx="50" ry="60" fill="url(#treeGradient)" />
                        
                        <rect x="300" y="190" width="25" height="70" fill="#795548" />
                        <ellipse cx="312" cy="170" rx="40" ry="50" fill="url(#treeGradient)" />
                        
                        <rect x="600" y="210" width="35" height="90" fill="#795548" />
                        <ellipse cx="617" cy="190" rx="55" ry="65" fill="url(#treeGradient)" />
                        
                        <!-- å…”å­å’Œä¹Œé¾Ÿåœ¨èµ·ç‚¹ -->
                        <g transform="translate(80, 300)">
                            <!-- å…”å­ -->
                            <ellipse cx="0" cy="0" rx="25" ry="20" fill="url(#rabbitGradient)" />
                            <circle cx="-15" cy="-10" r="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-20" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <ellipse cx="-10" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <circle cx="-18" cy="-12" r="3" fill="#000" />
                            <circle cx="-7" cy="-12" r="3" fill="#000" />
                            <circle cx="-12" cy="-8" r="2" fill="#FF4081" />
                            <ellipse cx="15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                        </g>
                        
                        <g transform="translate(80, 330)">
                            <!-- ä¹Œé¾Ÿ -->
                            <ellipse cx="0" cy="0" rx="30" ry="20" fill="url(#turtleGradient)" />
                            <ellipse cx="0" cy="0" rx="25" ry="15" fill="#2E7D32" />
                            <path d="M-20,0 Q-10,-10 0,0 Q10,-10 20,0" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-15,5 Q-7,-5 0,5 Q7,-5 15,5" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-10,10 Q-5,5 0,10 Q5,5 10,10" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <circle cx="-20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="-20" cy="-5" r="3" fill="#000" />
                            <circle cx="20" cy="-5" r="3" fill="#000" />
                            <ellipse cx="-30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <ellipse cx="30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                        </g>
                    </g>
                    
                    <!-- åœºæ™¯2: æ¯”èµ›å¼€å§‹ -->
                    <g id="scene2" style="display: none;">
                        <!-- æ ‘æœ¨ -->
                        <rect x="100" y="200" width="30" height="80" fill="#795548" />
                        <ellipse cx="115" cy="180" rx="50" ry="60" fill="url(#treeGradient)" />
                        
                        <rect x="300" y="190" width="25" height="70" fill="#795548" />
                        <ellipse cx="312" cy="170" rx="40" ry="50" fill="url(#treeGradient)" />
                        
                        <rect x="600" y="210" width="35" height="90" fill="#795548" />
                        <ellipse cx="617" cy="190" rx="55" ry="65" fill="url(#treeGradient)" />
                        
                        <!-- å…”å­å¿«é€Ÿå‰è¿› -->
                        <g transform="translate(300, 300)">
                            <ellipse cx="0" cy="0" rx="25" ry="20" fill="url(#rabbitGradient)" />
                            <circle cx="-15" cy="-10" r="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-20" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <ellipse cx="-10" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <circle cx="-18" cy="-12" r="3" fill="#000" />
                            <circle cx="-7" cy="-12" r="3" fill="#000" />
                            <circle cx="-12" cy="-8" r="2" fill="#FF4081" />
                            <ellipse cx="15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <!-- é€Ÿåº¦çº¿ -->
                            <line x1="-30" y1="0" x2="-50" y2="0" stroke="#9E9E9E" stroke-width="2" />
                            <line x1="-30" y1="-5" x2="-45" y2="-5" stroke="#9E9E9E" stroke-width="2" />
                            <line x1="-30" y1="5" x2="-45" y2="5" stroke="#9E9E9E" stroke-width="2" />
                        </g>
                        
                        <!-- ä¹Œé¾Ÿç¼“æ…¢å‰è¿› -->
                        <g transform="translate(120, 330)">
                            <ellipse cx="0" cy="0" rx="30" ry="20" fill="url(#turtleGradient)" />
                            <ellipse cx="0" cy="0" rx="25" ry="15" fill="#2E7D32" />
                            <path d="M-20,0 Q-10,-10 0,0 Q10,-10 20,0" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-15,5 Q-7,-5 0,5 Q7,-5 15,5" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-10,10 Q-5,5 0,10 Q5,5 10,10" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <circle cx="-20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="-20" cy="-5" r="3" fill="#000" />
                            <circle cx="20" cy="-5" r="3" fill="#000" />
                            <ellipse cx="-30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <ellipse cx="30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                        </g>
                    </g>
                    
                    <!-- åœºæ™¯3: å…”å­éª„å‚² -->
                    <g id="scene3" style="display: none;">
                        <!-- æ ‘æœ¨ -->
                        <rect x="100" y="200" width="30" height="80" fill="#795548" />
                        <ellipse cx="115" cy="180" rx="50" ry="60" fill="url(#treeGradient)" />
                        
                        <rect x="300" y="190" width="25" height="70" fill="#795548" />
                        <ellipse cx="312" cy="170" rx="40" ry="50" fill="url(#treeGradient)" />
                        
                        <rect x="600" y="210" width="35" height="90" fill="#795548" />
                        <ellipse cx="617" cy="190" rx="55" ry="65" fill="url(#treeGradient)" />
                        
                        <!-- å…”å­åœ¨æ ‘ä¸‹ä¼‘æ¯ -->
                        <g transform="translate(500, 280)">
                            <ellipse cx="0" cy="0" rx="25" ry="20" fill="url(#rabbitGradient)" />
                            <circle cx="-15" cy="-10" r="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-20" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <ellipse cx="-10" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <circle cx="-18" cy="-12" r="3" fill="#000" />
                            <circle cx="-7" cy="-12" r="3" fill="#000" />
                            <circle cx="-12" cy="-8" r="2" fill="#FF4081" />
                            <ellipse cx="15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <!-- ç¡è§‰çš„Zç¬¦å· -->
                            <text x="0" y="-30" text-anchor="middle" fill="#2196F3" font-size="20" font-weight="bold">Z</text>
                            <text x="15" y="-40" text-anchor="middle" fill="#2196F3" font-size="16" font-weight="bold">Z</text>
                        </g>
                        
                        <!-- ä¹Œé¾Ÿç»§ç»­å‰è¿› -->
                        <g transform="translate(250, 330)">
                            <ellipse cx="0" cy="0" rx="30" ry="20" fill="url(#turtleGradient)" />
                            <ellipse cx="0" cy="0" rx="25" ry="15" fill="#2E7D32" />
                            <path d="M-20,0 Q-10,-10 0,0 Q10,-10 20,0" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-15,5 Q-7,-5 0,5 Q7,-5 15,5" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-10,10 Q-5,5 0,10 Q5,5 10,10" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <circle cx="-20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="-20" cy="-5" r="3" fill="#000" />
                            <circle cx="20" cy="-5" r="3" fill="#000" />
                            <ellipse cx="-30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <ellipse cx="30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                        </g>
                    </g>
                    
                    <!-- åœºæ™¯4: ä¹Œé¾ŸåšæŒ -->
                    <g id="scene4" style="display: none;">
                        <!-- æ ‘æœ¨ -->
                        <rect x="100" y="200" width="30" height="80" fill="#795548" />
                        <ellipse cx="115" cy="180" rx="50" ry="60" fill="url(#treeGradient)" />
                        
                        <rect x="300" y="190" width="25" height="70" fill="#795548" />
                        <ellipse cx="312" cy="170" rx="40" ry="50" fill="url(#treeGradient)" />
                        
                        <rect x="600" y="210" width="35" height="90" fill="#795548" />
                        <ellipse cx="617" cy="190" rx="55" ry="65" fill="url(#treeGradient)" />
                        
                        <!-- å…”å­è¿˜åœ¨ç¡è§‰ -->
                        <g transform="translate(500, 280)">
                            <ellipse cx="0" cy="0" rx="25" ry="20" fill="url(#rabbitGradient)" />
                            <circle cx="-15" cy="-10" r="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-20" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <ellipse cx="-10" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <circle cx="-18" cy="-12" r="3" fill="#000" />
                            <circle cx="-7" cy="-12" r="3" fill="#000" />
                            <circle cx="-12" cy="-8" r="2" fill="#FF4081" />
                            <ellipse cx="15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <!-- ç¡è§‰çš„Zç¬¦å· -->
                            <text x="0" y="-30" text-anchor="middle" fill="#2196F3" font-size="20" font-weight="bold">Z</text>
                            <text x="15" y="-40" text-anchor="middle" fill="#2196F3" font-size="16" font-weight="bold">Z</text>
                            <text x="-15" y="-40" text-anchor="middle" fill="#2196F3" font-size="16" font-weight="bold">Z</text>
                        </g>
                        
                        <!-- ä¹Œé¾Ÿç»§ç»­å‰è¿›ï¼Œæ¥è¿‘ç»ˆç‚¹ -->
                        <g transform="translate(600, 330)">
                            <ellipse cx="0" cy="0" rx="30" ry="20" fill="url(#turtleGradient)" />
                            <ellipse cx="0" cy="0" rx="25" ry="15" fill="#2E7D32" />
                            <path d="M-20,0 Q-10,-10 0,0 Q10,-10 20,0" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-15,5 Q-7,-5 0,5 Q7,-5 15,5" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-10,10 Q-5,5 0,10 Q5,5 10,10" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <circle cx="-20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="-20" cy="-5" r="3" fill="#000" />
                            <circle cx="20" cy="-5" r="3" fill="#000" />
                            <ellipse cx="-30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <ellipse cx="30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                        </g>
                    </g>
                    
                    <!-- åœºæ™¯5: ä¹Œé¾Ÿèƒœåˆ© -->
                    <g id="scene5" style="display: none;">
                        <!-- æ ‘æœ¨ -->
                        <rect x="100" y="200" width="30" height="80" fill="#795548" />
                        <ellipse cx="115" cy="180" rx="50" ry="60" fill="url(#treeGradient)" />
                        
                        <rect x="300" y="190" width="25" height="70" fill="#795548" />
                        <ellipse cx="312" cy="170" rx="40" ry="50" fill="url(#treeGradient)" />
                        
                        <rect x="600" y="210" width="35" height="90" fill="#795548" />
                        <ellipse cx="617" cy="190" rx="55" ry="65" fill="url(#treeGradient)" />
                        
                        <!-- ä¹Œé¾Ÿåˆ°è¾¾ç»ˆç‚¹ -->
                        <g transform="translate(720, 330)">
                            <ellipse cx="0" cy="0" rx="30" ry="20" fill="url(#turtleGradient)" />
                            <ellipse cx="0" cy="0" rx="25" ry="15" fill="#2E7D32" />
                            <path d="M-20,0 Q-10,-10 0,0 Q10,-10 20,0" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-15,5 Q-7,-5 0,5 Q7,-5 15,5" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-10,10 Q-5,5 0,10 Q5,5 10,10" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <circle cx="-20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="-20" cy="-5" r="3" fill="#000" />
                            <circle cx="20" cy="-5" r="3" fill="#000" />
                            <ellipse cx="-30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <ellipse cx="30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <!-- èƒœåˆ©æ ‡å¿— -->
                            <text x="0" y="-35" text-anchor="middle" fill="#FFD700" font-size="24" font-weight="bold">â˜…</text>
                        </g>
                        
                        <!-- å…”å­æƒŠé†’ -->
                        <g transform="translate(500, 280)">
                            <ellipse cx="0" cy="0" rx="25" ry="20" fill="url(#rabbitGradient)" />
                            <circle cx="-15" cy="-10" r="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-20" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <ellipse cx="-10" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <circle cx="-18" cy="-12" r="3" fill="#000" />
                            <circle cx="-7" cy="-12" r="3" fill="#000" />
                            <circle cx="-12" cy="-8" r="2" fill="#FF4081" />
                            <ellipse cx="15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <!-- æƒŠè®¶è¡¨æƒ… -->
                            <text x="-12" y="-12" text-anchor="middle" fill="#000" font-size="10">!</text>
                            <text x="-7" y="-12" text-anchor="middle" fill="#000" font-size="10">!</text>
                        </g>
                    </g>
                    
                    <!-- åœºæ™¯6: æ•…äº‹å¯“æ„ -->
                    <g id="scene6" style="display: none;">
                        <!-- æ ‘æœ¨ -->
                        <rect x="100" y="200" width="30" height="80" fill="#795548" />
                        <ellipse cx="115" cy="180" rx="50" ry="60" fill="url(#treeGradient)" />
                        
                        <rect x="300" y="190" width="25" height="70" fill="#795548" />
                        <ellipse cx="312" cy="170" rx="40" ry="50" fill="url(#treeGradient)" />
                        
                        <rect x="600" y="210" width="35" height="90" fill="#795548" />
                        <ellipse cx="617" cy="190" rx="55" ry="65" fill="url(#treeGradient)" />
                        
                        <!-- ä¹Œé¾Ÿåœ¨ç»ˆç‚¹ -->
                        <g transform="translate(720, 330)">
                            <ellipse cx="0" cy="0" rx="30" ry="20" fill="url(#turtleGradient)" />
                            <ellipse cx="0" cy="0" rx="25" ry="15" fill="#2E7D32" />
                            <path d="M-20,0 Q-10,-10 0,0 Q10,-10 20,0" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-15,5 Q-7,-5 0,5 Q7,-5 15,5" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <path d="M-10,10 Q-5,5 0,10 Q5,5 10,10" stroke="#1B5E20" stroke-width="2" fill="none" />
                            <circle cx="-20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="20" cy="-5" r="5" fill="#4CAF50" />
                            <circle cx="-20" cy="-5" r="3" fill="#000" />
                            <circle cx="20" cy="-5" r="3" fill="#000" />
                            <ellipse cx="-30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                            <ellipse cx="30" cy="5" rx="8" ry="5" fill="#4CAF50" />
                        </g>
                        
                        <!-- å…”å­åœ¨åé¢ -->
                        <g transform="translate(600, 300)">
                            <ellipse cx="0" cy="0" rx="25" ry="20" fill="url(#rabbitGradient)" />
                            <circle cx="-15" cy="-10" r="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-20" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <ellipse cx="-10" cy="-20" rx="8" ry="15" fill="url(#rabbitGradient)" />
                            <circle cx="-18" cy="-12" r="3" fill="#000" />
                            <circle cx="-7" cy="-12" r="3" fill="#000" />
                            <circle cx="-12" cy="-8" r="2" fill="#FF4081" />
                            <ellipse cx="15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <ellipse cx="-15" cy="5" rx="8" ry="12" fill="url(#rabbitGradient)" />
                            <!-- æ²®ä¸§è¡¨æƒ… -->
                            <path d="M-18,-8 Q-12,-5 -7,-8" stroke="#000" stroke-width="1.5" fill="none" />
                        </g>
                    </g>
                </g>
            </svg>
        </div>
        
        <div class="subtitle-container">
            <div class="subtitle" id="subtitle"></div>
        </div>
        
        <div class="controls">
            <button class="control-btn" id="playBtn" title="æ’­æ”¾" disabled>
                <span id="playIcon">â–¶</span>
            </button>
            <button class="control-btn" id="muteBtn" title="é™éŸ³">
                <span id="muteIcon">ğŸ”Š</span>
            </button>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-handle" id="progressHandle"></div>
                </div>
                <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        Â© 2023 https://study11.ai/
    </div>
    
    <!-- ä¸ºæ¯ä¸ªåœºæ™¯åˆ›å»ºä¸€ä¸ªéŸ³é¢‘å…ƒç´  -->
    <div id="audioContainer"></div>
    
    <script>
        // åŠ¨ç”»åœºæ™¯æ•°æ®
        const scenes = [
            {
                title: "é¾Ÿå…”èµ›è·‘",
                subtitle: "ä»å‰ï¼Œæœ‰ä¸€åªéª„å‚²çš„å…”å­å’Œä¸€åªå‹¤åŠ³çš„ä¹Œé¾Ÿã€‚å…”å­å˜²ç¬‘ä¹Œé¾Ÿèµ°è·¯æ…¢ï¼Œä¹Œé¾Ÿä¸æœæ°”ï¼Œäºæ˜¯å†³å®šæ¯”èµ›è·‘æ­¥ã€‚",
                text: "è¿™æ˜¯ä¸€ä¸ªå¤è€çš„å¯“è¨€æ•…äº‹ï¼Œè®²è¿°äº†éª„å‚²çš„å…”å­å’Œå‹¤åŠ³çš„ä¹Œé¾Ÿä¹‹é—´çš„æ¯”èµ›ã€‚å…”å­å¤©ç”Ÿè·‘å¾—å¿«ï¼Œè€Œä¹Œé¾Ÿè¡ŒåŠ¨ç¼“æ…¢ã€‚å½“å…”å­å˜²ç¬‘ä¹Œé¾Ÿæ—¶ï¼Œä¹Œé¾Ÿæ¥å—äº†æŒ‘æˆ˜ï¼Œå†³å®šé€šè¿‡æ¯”èµ›è¯æ˜è‡ªå·±ã€‚è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸è¦è½»è§†ä»»ä½•äººï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¼˜ç‚¹å’Œé•¿å¤„ã€‚",
                action: () => {
                    document.getElementById('sceneTitle').textContent = "é¾Ÿå…”èµ›è·‘";
                    document.getElementById('textContent').textContent = "è¿™æ˜¯ä¸€ä¸ªå¤è€çš„å¯“è¨€æ•…äº‹ï¼Œè®²è¿°äº†éª„å‚²çš„å…”å­å’Œå‹¤åŠ³çš„ä¹Œé¾Ÿä¹‹é—´çš„æ¯”èµ›ã€‚å…”å­å¤©ç”Ÿè·‘å¾—å¿«ï¼Œè€Œä¹Œé¾Ÿè¡ŒåŠ¨ç¼“æ…¢ã€‚å½“å…”å­å˜²ç¬‘ä¹Œé¾Ÿæ—¶ï¼Œä¹Œé¾Ÿæ¥å—äº†æŒ‘æˆ˜ï¼Œå†³å®šé€šè¿‡æ¯”èµ›è¯æ˜è‡ªå·±ã€‚è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œä¸è¦è½»è§†ä»»ä½•äººï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¼˜ç‚¹å’Œé•¿å¤„ã€‚";
                    
                    // æ˜¾ç¤ºåœºæ™¯1ï¼Œéšè—å…¶ä»–åœºæ™¯
                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`scene${i}`).style.display = i === 1 ? 'block' : 'none';
                    }
                    
                    document.getElementById('textPanel').classList.add('active');
                    document.getElementById('sceneTitle').classList.add('active');
                }
            },
            {
                title: "æ¯”èµ›å¼€å§‹",
                subtitle: "æ¯”èµ›å¼€å§‹äº†ï¼å…”å­é£å¿«åœ°å†²äº†å‡ºå»ï¼Œå¾ˆå¿«å°±å°†ä¹Œé¾Ÿè¿œè¿œç”©åœ¨åé¢ã€‚ä¹Œé¾Ÿåˆ™ä¸€æ­¥ä¸€æ­¥ï¼ŒåšæŒä¸æ‡ˆåœ°å‘å‰çˆ¬è¡Œã€‚",
                text: "æ¯”èµ›å¼€å§‹çš„å“¨å£°ä¸€å“ï¼Œå…”å­å°±åƒç¦»å¼¦çš„ç®­ä¸€æ ·å†²äº†å‡ºå»ã€‚å®ƒçš„é€Ÿåº¦éå¸¸å¿«ï¼Œå¾ˆå¿«å°±å°†ä¹Œé¾Ÿè¿œè¿œåœ°ç”©åœ¨äº†åé¢ã€‚è€Œä¹Œé¾Ÿè™½ç„¶è¡ŒåŠ¨ç¼“æ…¢ï¼Œä½†å®ƒæ²¡æœ‰æ°”é¦ï¼Œè€Œæ˜¯æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥ï¼Œä¸€æ­¥ä¸€æ­¥åœ°å‘å‰çˆ¬è¡Œã€‚ä¹Œé¾ŸçŸ¥é“ï¼Œåªè¦åšæŒä¸æ‡ˆï¼Œå°±ä¸€å®šèƒ½åˆ°è¾¾ç»ˆç‚¹ã€‚",
                action: () => {
                    document.getElementById('sceneTitle').textContent = "æ¯”èµ›å¼€å§‹";
                    document.getElementById('textContent').textContent = "æ¯”èµ›å¼€å§‹çš„å“¨å£°ä¸€å“ï¼Œå…”å­å°±åƒç¦»å¼¦çš„ç®­ä¸€æ ·å†²äº†å‡ºå»ã€‚å®ƒçš„é€Ÿåº¦éå¸¸å¿«ï¼Œå¾ˆå¿«å°±å°†ä¹Œé¾Ÿè¿œè¿œåœ°ç”©åœ¨äº†åé¢ã€‚è€Œä¹Œé¾Ÿè™½ç„¶è¡ŒåŠ¨ç¼“æ…¢ï¼Œä½†å®ƒæ²¡æœ‰æ°”é¦ï¼Œè€Œæ˜¯æŒ‰ç…§è‡ªå·±çš„èŠ‚å¥ï¼Œä¸€æ­¥ä¸€æ­¥åœ°å‘å‰çˆ¬è¡Œã€‚ä¹Œé¾ŸçŸ¥é“ï¼Œåªè¦åšæŒä¸æ‡ˆï¼Œå°±ä¸€å®šèƒ½åˆ°è¾¾ç»ˆç‚¹ã€‚";
                    
                    // æ˜¾ç¤ºåœºæ™¯2ï¼Œéšè—å…¶ä»–åœºæ™¯
                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`scene${i}`).style.display = i === 2 ? 'block' : 'none';
                    }
                }
            },
            {
                title: "å…”å­çš„éª„å‚²",
                subtitle: "å…”å­çœ‹åˆ°è‡ªå·±é¥é¥é¢†å…ˆï¼Œéå¸¸å¾—æ„ã€‚å®ƒæƒ³ï¼š'ä¹Œé¾Ÿé‚£ä¹ˆæ…¢ï¼Œæˆ‘ç¡ä¸€è§‰å†è·‘ä¹Ÿæ¥å¾—åŠã€‚'äºæ˜¯ï¼Œå…”å­åœ¨è·¯è¾¹çš„ä¸€æ£µæ ‘ä¸‹èººä¸‹ä¼‘æ¯ã€‚",
                text: "å…”å­å›å¤´çœ‹äº†çœ‹ï¼Œå‘ç°ä¹Œé¾Ÿå·²ç»è¢«è¿œè¿œåœ°ç”©åœ¨äº†åé¢ã€‚å®ƒæ„Ÿåˆ°éå¸¸éª„å‚²å’Œè‡ªæ»¡ï¼Œå¿ƒæƒ³ï¼š'æˆ‘è·‘å¾—è¿™ä¹ˆå¿«ï¼Œä¹Œé¾Ÿé‚£ä¹ˆæ…¢ï¼Œæˆ‘ç¡ä¸€è§‰å†è·‘ä¹Ÿä¸€å®šèƒ½èµ¢ã€‚'äºæ˜¯ï¼Œå…”å­åœ¨è·¯è¾¹çš„ä¸€æ£µå¤§æ ‘ä¸‹èººä¸‹æ¥ï¼Œå¾ˆå¿«å°±ç¡ç€äº†ã€‚å…”å­çš„éª„å‚²å’Œè‡ªæ»¡ï¼Œè®©å®ƒå¤±å»äº†è­¦æƒ•æ€§ã€‚",
                action: () => {
                    document.getElementById('sceneTitle').textContent = "å…”å­çš„éª„å‚²";
                    document.getElementById('textContent').textContent = "å…”å­å›å¤´çœ‹äº†çœ‹ï¼Œå‘ç°ä¹Œé¾Ÿå·²ç»è¢«è¿œè¿œåœ°ç”©åœ¨äº†åé¢ã€‚å®ƒæ„Ÿåˆ°éå¸¸éª„å‚²å’Œè‡ªæ»¡ï¼Œå¿ƒæƒ³ï¼š'æˆ‘è·‘å¾—è¿™ä¹ˆå¿«ï¼Œä¹Œé¾Ÿé‚£ä¹ˆæ…¢ï¼Œæˆ‘ç¡ä¸€è§‰å†è·‘ä¹Ÿä¸€å®šèƒ½èµ¢ã€‚'äºæ˜¯ï¼Œå…”å­åœ¨è·¯è¾¹çš„ä¸€æ£µå¤§æ ‘ä¸‹èººä¸‹æ¥ï¼Œå¾ˆå¿«å°±ç¡ç€äº†ã€‚å…”å­çš„éª„å‚²å’Œè‡ªæ»¡ï¼Œè®©å®ƒå¤±å»äº†è­¦æƒ•æ€§ã€‚";
                    
                    // æ˜¾ç¤ºåœºæ™¯3ï¼Œéšè—å…¶ä»–åœºæ™¯
                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`scene${i}`).style.display = i === 3 ? 'block' : 'none';
                    }
                }
            },
            {
                title: "ä¹Œé¾Ÿçš„åšæŒ",
                subtitle: "ä¹Œé¾Ÿä¸€æ­¥ä¸€æ­¥åœ°çˆ¬è¡Œï¼Œç»è¿‡å…”å­èº«è¾¹æ—¶ï¼Œçœ‹åˆ°å…”å­æ­£åœ¨ç¡è§‰ã€‚ä¹Œé¾Ÿæ²¡æœ‰åœä¸‹æ¥ï¼Œè€Œæ˜¯ç»§ç»­æœç€ç»ˆç‚¹å‰è¿›ã€‚",
                text: "ä¹Œé¾Ÿè™½ç„¶çˆ¬å¾—å¾ˆæ…¢ï¼Œä½†å®ƒä»æœªåœä¸‹è„šæ­¥ã€‚å½“å®ƒçˆ¬åˆ°å…”å­ç¡è§‰çš„åœ°æ–¹æ—¶ï¼Œçœ‹åˆ°å…”å­æ­£åœ¨ç†Ÿç¡ã€‚ä¹Œé¾Ÿæ²¡æœ‰å«é†’å…”å­ï¼Œä¹Ÿæ²¡æœ‰åœä¸‹æ¥ä¼‘æ¯ï¼Œè€Œæ˜¯ç»§ç»­æœç€ç»ˆç‚¹ä¸€æ­¥ä¸€æ­¥åœ°çˆ¬å»ã€‚ä¹Œé¾ŸçŸ¥é“ï¼Œæ¯”èµ›è¿˜æ²¡æœ‰ç»“æŸï¼Œåªæœ‰åˆ°è¾¾ç»ˆç‚¹æ‰æ˜¯èƒœåˆ©ã€‚å®ƒçš„æ¯…åŠ›å’ŒåšæŒï¼Œè®©å®ƒä¸æ–­å‰è¿›ã€‚",
                action: () => {
                    document.getElementById('sceneTitle').textContent = "ä¹Œé¾Ÿçš„åšæŒ";
                    document.getElementById('textContent').textContent = "ä¹Œé¾Ÿè™½ç„¶çˆ¬å¾—å¾ˆæ…¢ï¼Œä½†å®ƒä»æœªåœä¸‹è„šæ­¥ã€‚å½“å®ƒçˆ¬åˆ°å…”å­ç¡è§‰çš„åœ°æ–¹æ—¶ï¼Œçœ‹åˆ°å…”å­æ­£åœ¨ç†Ÿç¡ã€‚ä¹Œé¾Ÿæ²¡æœ‰å«é†’å…”å­ï¼Œä¹Ÿæ²¡æœ‰åœä¸‹æ¥ä¼‘æ¯ï¼Œè€Œæ˜¯ç»§ç»­æœç€ç»ˆç‚¹ä¸€æ­¥ä¸€æ­¥åœ°çˆ¬å»ã€‚ä¹Œé¾ŸçŸ¥é“ï¼Œæ¯”èµ›è¿˜æ²¡æœ‰ç»“æŸï¼Œåªæœ‰åˆ°è¾¾ç»ˆç‚¹æ‰æ˜¯èƒœåˆ©ã€‚å®ƒçš„æ¯…åŠ›å’ŒåšæŒï¼Œè®©å®ƒä¸æ–­å‰è¿›ã€‚";
                    
                    // æ˜¾ç¤ºåœºæ™¯4ï¼Œéšè—å…¶ä»–åœºæ™¯
                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`scene${i}`).style.display = i === 4 ? 'block' : 'none';
                    }
                }
            },
            {
                title: "ä¹Œé¾Ÿèƒœåˆ©",
                subtitle: "å½“å…”å­é†’æ¥æ—¶ï¼Œå‘ç°ä¹Œé¾Ÿå·²ç»æ¥è¿‘ç»ˆç‚¹äº†ï¼å…”å­æ€¥å¿™è¿½èµ¶ï¼Œä½†ä¸ºæ—¶å·²æ™šï¼Œä¹Œé¾Ÿå·²ç»å…ˆä¸€æ­¥åˆ°è¾¾ç»ˆç‚¹ï¼Œèµ¢å¾—äº†æ¯”èµ›ã€‚",
                text: "å½“å…”å­ä»ç¡æ¢¦ä¸­é†’æ¥æ—¶ï¼Œå®ƒæƒŠè®¶åœ°å‘ç°ä¹Œé¾Ÿå·²ç»å¿«è¦åˆ°è¾¾ç»ˆç‚¹äº†ï¼å…”å­æ€¥å¿™è·³èµ·æ¥ï¼Œæ‹¼å‘½åœ°å‘ç»ˆç‚¹è·‘å»ï¼Œä½†å·²ç»å¤ªè¿Ÿäº†ã€‚ä¹Œé¾Ÿåœ¨å…”å­çš„æ³¨è§†ä¸‹ï¼Œä¸€æ­¥ä¸€æ­¥åœ°çˆ¬è¿‡äº†ç»ˆç‚¹çº¿ï¼Œèµ¢å¾—äº†æ¯”èµ›ã€‚å…”å­éå¸¸åæ‚”è‡ªå·±çš„éª„å‚²å’Œæ‡’æƒ°ï¼Œä½†ä¸€åˆ‡éƒ½å·²ç»æ— æ³•æŒ½å›ã€‚",
                action: () => {
                    document.getElementById('sceneTitle').textContent = "ä¹Œé¾Ÿèƒœåˆ©";
                    document.getElementById('textContent').textContent = "å½“å…”å­ä»ç¡æ¢¦ä¸­é†’æ¥æ—¶ï¼Œå®ƒæƒŠè®¶åœ°å‘ç°ä¹Œé¾Ÿå·²ç»å¿«è¦åˆ°è¾¾ç»ˆç‚¹äº†ï¼å…”å­æ€¥å¿™è·³èµ·æ¥ï¼Œæ‹¼å‘½åœ°å‘ç»ˆç‚¹è·‘å»ï¼Œä½†å·²ç»å¤ªè¿Ÿäº†ã€‚ä¹Œé¾Ÿåœ¨å…”å­çš„æ³¨è§†ä¸‹ï¼Œä¸€æ­¥ä¸€æ­¥åœ°çˆ¬è¿‡äº†ç»ˆç‚¹çº¿ï¼Œèµ¢å¾—äº†æ¯”èµ›ã€‚å…”å­éå¸¸åæ‚”è‡ªå·±çš„éª„å‚²å’Œæ‡’æƒ°ï¼Œä½†ä¸€åˆ‡éƒ½å·²ç»æ— æ³•æŒ½å›ã€‚";
                    
                    // æ˜¾ç¤ºåœºæ™¯5ï¼Œéšè—å…¶ä»–åœºæ™¯
                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`scene${i}`).style.display = i === 5 ? 'block' : 'none';
                    }
                }
            },
            {
                title: "æ•…äº‹çš„å¯“æ„",
                subtitle: "è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼šéª„å‚²ä½¿äººè½åï¼Œè°¦è™šä½¿äººè¿›æ­¥ã€‚åšæŒä¸æ‡ˆçš„åŠªåŠ›æ¯”å¤©èµ‹æ›´é‡è¦ã€‚æ— è®ºåšä»€ä¹ˆäº‹æƒ…ï¼Œéƒ½è¦ä¿æŒè°¦è™šå’ŒåšæŒçš„æ€åº¦ã€‚",
                text: "é¾Ÿå…”èµ›è·‘çš„æ•…äº‹ç»™æˆ‘ä»¬å¸¦æ¥äº†æ·±åˆ»çš„å¯ç¤ºï¼šé¦–å…ˆï¼Œéª„å‚²è‡ªæ»¡ä¼šå¯¼è‡´å¤±è´¥ï¼Œå…”å­å› ä¸ºéª„å‚²è€Œè¾“æ‰äº†æ¯”èµ›ï¼›å…¶æ¬¡ï¼ŒåšæŒä¸æ‡ˆçš„åŠªåŠ›æ¯”å¤©èµ‹æ›´é‡è¦ï¼Œä¹Œé¾Ÿè™½ç„¶å¤©ç”Ÿè·‘å¾—æ…¢ï¼Œä½†é€šè¿‡åšæŒä¸æ‡ˆçš„åŠªåŠ›èµ¢å¾—äº†èƒœåˆ©ï¼›æœ€åï¼Œæ— è®ºåšä»€ä¹ˆäº‹æƒ…ï¼Œéƒ½è¦ä¿æŒè°¦è™šå’Œä¸“æ³¨çš„æ€åº¦ï¼Œä¸è¦å› ä¸ºæš‚æ—¶çš„ä¼˜åŠ¿è€Œæ”¾æ¾è­¦æƒ•ã€‚è¿™ä¸ªæ•…äº‹é¼“åŠ±æˆ‘ä»¬è¦è„šè¸å®åœ°ï¼ŒæŒä¹‹ä»¥æ’ã€‚",
                action: () => {
                    document.getElementById('sceneTitle').textContent = "æ•…äº‹çš„å¯“æ„";
                    document.getElementById('textContent').textContent = "é¾Ÿå…”èµ›è·‘çš„æ•…äº‹ç»™æˆ‘ä»¬å¸¦æ¥äº†æ·±åˆ»çš„å¯ç¤ºï¼šé¦–å…ˆï¼Œéª„å‚²è‡ªæ»¡ä¼šå¯¼è‡´å¤±è´¥ï¼Œå…”å­å› ä¸ºéª„å‚²è€Œè¾“æ‰äº†æ¯”èµ›ï¼›å…¶æ¬¡ï¼ŒåšæŒä¸æ‡ˆçš„åŠªåŠ›æ¯”å¤©èµ‹æ›´é‡è¦ï¼Œä¹Œé¾Ÿè™½ç„¶å¤©ç”Ÿè·‘å¾—æ…¢ï¼Œä½†é€šè¿‡åšæŒä¸æ‡ˆçš„åŠªåŠ›èµ¢å¾—äº†èƒœåˆ©ï¼›æœ€åï¼Œæ— è®ºåšä»€ä¹ˆäº‹æƒ…ï¼Œéƒ½è¦ä¿æŒè°¦è™šå’Œä¸“æ³¨çš„æ€åº¦ï¼Œä¸è¦å› ä¸ºæš‚æ—¶çš„ä¼˜åŠ¿è€Œæ”¾æ¾è­¦æƒ•ã€‚è¿™ä¸ªæ•…äº‹é¼“åŠ±æˆ‘ä»¬è¦è„šè¸å®åœ°ï¼ŒæŒä¹‹ä»¥æ’ã€‚";
                    
                    // æ˜¾ç¤ºåœºæ™¯6ï¼Œéšè—å…¶ä»–åœºæ™¯
                    for (let i = 1; i <= 6; i++) {
                        document.getElementById(`scene${i}`).style.display = i === 6 ? 'block' : 'none';
                    }
                }
            }
        ];
        
        // å…¨å±€å˜é‡
        let currentScene = 0;
        let isPlaying = false;
        let isMuted = false;
        let audioElements = [];
        let sceneStartTime = 0;
        let totalDuration = 0;
        let sceneTimestamps = []; // è®°å½•æ¯ä¸ªåœºæ™¯çš„å¼€å§‹æ—¶é—´æˆ³
        let isDragging = false;
        let audioCache = {}; // éŸ³é¢‘ç¼“å­˜å¯¹è±¡
        let cacheExpiry = 7 * 24 * 60 * 60 * 1000; // ç¼“å­˜æœ‰æ•ˆæœŸï¼š7å¤©
        
        // DOMå…ƒç´ 
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const muteBtn = document.getElementById('muteBtn');
        const muteIcon = document.getElementById('muteIcon');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const progressHandle = document.getElementById('progressHandle');
        const subtitle = document.getElementById('subtitle');
        const loading = document.getElementById('loading');
        const audioContainer = document.getElementById('audioContainer');
        const cacheIndicator = document.getElementById('cacheIndicator');
        const timeDisplay = document.getElementById('timeDisplay');
        
        // åˆå§‹åŒ–éŸ³é¢‘ç¼“å­˜
        function initAudioCache() {
            try {
                // å°è¯•ä»localStorageåŠ è½½ç¼“å­˜
                const cachedData = localStorage.getItem('ttsAudioCache');
                if (cachedData) {
                    const parsedCache = JSON.parse(cachedData);
                    
                    // æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ
                    const now = Date.now();
                    for (const key in parsedCache) {
                        if (parsedCache[key].timestamp + cacheExpiry < now) {
                            delete parsedCache[key]; // åˆ é™¤è¿‡æœŸç¼“å­˜
                        }
                    }
                    
                    audioCache = parsedCache;
                    // ä¿å­˜æ›´æ–°åçš„ç¼“å­˜
                    localStorage.setItem('ttsAudioCache', JSON.stringify(audioCache));
                }
            } catch (e) {
                console.error('åˆå§‹åŒ–éŸ³é¢‘ç¼“å­˜å¤±è´¥:', e);
                audioCache = {};
            }
        }
        
        // å°†Blobè½¬æ¢ä¸ºBase64
        function blobToBase64(blob) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onloadend = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(blob);
            });
        }
        
        // å°†Base64è½¬æ¢ä¸ºBlob
        function base64ToBlob(base64) {
            // åˆ†ç¦»Base64æ•°æ®å’ŒMIMEç±»å‹
            const parts = base64.split(';base64,');
            const contentType = parts[0].split(':')[1];
            const raw = window.atob(parts[1]);
            
            // è½¬æ¢ä¸ºArrayBuffer
            const uInt8Array = new Uint8Array(raw.length);
            for (let i = 0; i < raw.length; ++i) {
                uInt8Array[i] = raw.charCodeAt(i);
            }
            
            // åˆ›å»ºBlob
            return new Blob([uInt8Array], { type: contentType });
        }
        
        // ä¿å­˜éŸ³é¢‘åˆ°ç¼“å­˜
        async function saveAudioToCache(text, blob) {
            try {
                // å°†Blobè½¬æ¢ä¸ºBase64å­—ç¬¦ä¸²
                const base64Data = await blobToBase64(blob);
                
                audioCache[text] = {
                    data: base64Data,
                    timestamp: Date.now()
                };
                localStorage.setItem('ttsAudioCache', JSON.stringify(audioCache));
            } catch (e) {
                console.error('ä¿å­˜éŸ³é¢‘ç¼“å­˜å¤±è´¥:', e);
            }
        }
        
        // ä»ç¼“å­˜è·å–éŸ³é¢‘
        function getAudioFromCache(text) {
            if (audioCache[text] && audioCache[text].timestamp + cacheExpiry > Date.now()) {
                try {
                    // å°†Base64è½¬æ¢å›Blob
                    const blob = base64ToBlob(audioCache[text].data);
                    return URL.createObjectURL(blob);
                } catch (e) {
                    console.error('ä»ç¼“å­˜æ¢å¤éŸ³é¢‘å¤±è´¥:', e);
                    return null;
                }
            }
            return null;
        }
        
        // åˆå§‹åŒ–éŸ³é¢‘å…ƒç´ 
        function initializeAudioElements() {
            // æ¸…ç©ºå®¹å™¨
            audioContainer.innerHTML = '';
            audioElements = [];
            
            // ä¸ºæ¯ä¸ªåœºæ™¯åˆ›å»ºéŸ³é¢‘å…ƒç´ 
            scenes.forEach((scene, index) => {
                const audio = document.createElement('audio');
                audio.id = `audio-${index}`;
                audio.preload = 'auto';
                audioContainer.appendChild(audio);
                audioElements.push(audio);
            });
        }
        
        // åˆæˆå•ä¸ªåœºæ™¯çš„è¯­éŸ³
        async function synthesizeSceneSpeech(index) {
            const text = scenes[index].subtitle;
            const encodedText = encodeURIComponent(text);
            
            // æ£€æŸ¥ç¼“å­˜
            const cachedAudioUrl = getAudioFromCache(text);
            if (cachedAudioUrl) {
                // æ˜¾ç¤ºç¼“å­˜æŒ‡ç¤ºå™¨
                cacheIndicator.classList.add('active');
                setTimeout(() => {
                    cacheIndicator.classList.remove('active');
                }, 2000);
                
                // ä½¿ç”¨ç¼“å­˜çš„éŸ³é¢‘
                audioElements[index].src = cachedAudioUrl;
                
                // ç­‰å¾…éŸ³é¢‘åŠ è½½å®Œæˆä»¥è·å–æ—¶é•¿
                return new Promise((resolve) => {
                    audioElements[index].onloadedmetadata = () => {
                        scenes[index].duration = audioElements[index].duration * 1000; // è½¬æ¢ä¸ºæ¯«ç§’
                        resolve();
                    };
                });
            }
            
            // ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œè¯·æ±‚TTSæœåŠ¡
            try {
                const response = await fetch(`https://javalinux.explanation.fun/tts?input=${encodedText}`);
                const blob = await response.blob();
                const audioUrl = URL.createObjectURL(blob);
                
                // ä¿å­˜åˆ°ç¼“å­˜
                await saveAudioToCache(text, blob);
                
                audioElements[index].src = audioUrl;
                
                // ç­‰å¾…éŸ³é¢‘åŠ è½½å®Œæˆä»¥è·å–æ—¶é•¿
                return new Promise((resolve) => {
                    audioElements[index].onloadedmetadata = () => {
                        scenes[index].duration = audioElements[index].duration * 1000; // è½¬æ¢ä¸ºæ¯«ç§’
                        resolve();
                    };
                });
            } catch (error) {
                console.error(`åœºæ™¯ ${index} TTSåˆæˆå¤±è´¥:`, error);
                // ä½¿ç”¨é»˜è®¤æŒç»­æ—¶é—´
                scenes[index].duration = 5000;
                resolve();
            }
        }
        
        // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
        function formatTime(milliseconds) {
            const totalSeconds = Math.floor(milliseconds / 1000);
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // æ›´æ–°æ—¶é—´æ˜¾ç¤º
        function updateTimeDisplay(currentTime, totalTime) {
            const currentTimeStr = formatTime(currentTime);
            const totalTimeStr = formatTime(totalTime);
            timeDisplay.textContent = `${currentTimeStr} / ${totalTimeStr}`;
        }
        
        // é¢„åŠ è½½æ‰€æœ‰éŸ³é¢‘
        async function preloadAllAudio() {
            loading.classList.add('active');
            playBtn.disabled = true;
            
            // åˆå§‹åŒ–éŸ³é¢‘ç¼“å­˜
            initAudioCache();
            
            initializeAudioElements();
            
            // é¡ºåºåˆæˆæ¯ä¸ªåœºæ™¯çš„è¯­éŸ³
            for (let i = 0; i < scenes.length; i++) {
                await synthesizeSceneSpeech(i);
            }
            
            // è®¡ç®—æ—¶é—´æˆ³
            calculateTimestamps();
            
            // åˆå§‹åŒ–æ—¶é—´æ˜¾ç¤º
            updateTimeDisplay(0, totalDuration);
            
            loading.classList.remove('active');
            playBtn.disabled = false;
        }
        
        // è®¡ç®—æ¯ä¸ªåœºæ™¯çš„æ—¶é—´æˆ³
        function calculateTimestamps() {
            sceneTimestamps = [];
            let accumulatedTime = 0;
            
            scenes.forEach((scene) => {
                sceneTimestamps.push(accumulatedTime);
                accumulatedTime += scene.duration;
            });
            
            totalDuration = accumulatedTime;
        }
        
        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            if (!isPlaying) return;
            
            const currentAudio = audioElements[currentScene];
            if (!currentAudio) return;
            
            // è®¡ç®—å½“å‰æ—¶é—´ç‚¹
            const sceneStartTime = sceneTimestamps[currentScene];
            const currentTime = sceneStartTime + (currentAudio.currentTime * 1000);
            const progress = Math.min((currentTime / totalDuration) * 100, 100);
            
            progressFill.style.width = progress + '%';
            progressHandle.style.left = progress + '%';
            
            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            updateTimeDisplay(currentTime, totalDuration);
            
            if (progress >= 100) {
                stopAnimation();
            } else {
                requestAnimationFrame(updateProgress);
            }
        }
        
        // æ’­æ”¾æŒ‡å®šåœºæ™¯
        function playScene(sceneIndex) {
            if (sceneIndex >= scenes.length) {
                stopAnimation();
                return;
            }
            
            // åœæ­¢å½“å‰éŸ³é¢‘
            if (currentScene < audioElements.length && audioElements[currentScene]) {
                audioElements[currentScene].pause();
            }
            
            currentScene = sceneIndex;
            const scene = scenes[sceneIndex];
            const audio = audioElements[sceneIndex];
            
            // æ›´æ–°å­—å¹•å’ŒåŠ¨ç”»
            subtitle.textContent = scene.subtitle;
            subtitle.classList.add('active');
            scene.action();
            
            // æ’­æ”¾éŸ³é¢‘
            if (audio && !isMuted) {
                audio.currentTime = 0;
                audio.play().catch(e => console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', e));
                
                // éŸ³é¢‘ç»“æŸæ—¶æ’­æ”¾ä¸‹ä¸€ä¸ªåœºæ™¯
                audio.onended = () => {
                    subtitle.classList.remove('active');
                    playScene(currentScene + 1);
                };
            } else {
                // å¦‚æœé™éŸ³æˆ–æ²¡æœ‰éŸ³é¢‘ï¼Œä½¿ç”¨å®šæ—¶å™¨
                setTimeout(() => {
                    subtitle.classList.remove('active');
                    playScene(currentScene + 1);
                }, scene.duration);
            }
        }
        
        // å¼€å§‹åŠ¨ç”»
        function startAnimation() {
            if (isPlaying) return;
            
            isPlaying = true;
            playIcon.textContent = 'â¸';
            currentScene = 0;
            
            // å¼€å§‹æ’­æ”¾ç¬¬ä¸€ä¸ªåœºæ™¯
            playScene(0);
            updateProgress();
        }
        
        // æš‚åœåŠ¨ç”»
        function pauseAnimation() {
            isPlaying = false;
            playIcon.textContent = 'â–¶';
            
            // æš‚åœå½“å‰éŸ³é¢‘
            if (currentScene < audioElements.length && audioElements[currentScene]) {
                audioElements[currentScene].pause();
            }
        }
        
        // åœæ­¢åŠ¨ç”»
        function stopAnimation() {
            pauseAnimation();
            currentScene = 0;
            progressFill.style.width = '0%';
            progressHandle.style.left = '0%';
            subtitle.textContent = '';
            
            // é‡ç½®æ—¶é—´æ˜¾ç¤º
            updateTimeDisplay(0, totalDuration);
            
            // é‡ç½®åœºæ™¯
            document.getElementById('textPanel').classList.remove('active');
            document.getElementById('sceneTitle').classList.remove('active');
            
            // éšè—æ‰€æœ‰åœºæ™¯
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`scene${i}`).style.display = 'none';
            }
        }
        
        // åˆ‡æ¢é™éŸ³
        function toggleMute() {
            isMuted = !isMuted;
            muteIcon.textContent = isMuted ? 'ğŸ”‡' : 'ğŸ”Š';
            
            // è®¾ç½®æ‰€æœ‰éŸ³é¢‘å…ƒç´ çš„é™éŸ³çŠ¶æ€
            audioElements.forEach(audio => {
                audio.muted = isMuted;
            });
        }
        
        // è¿›åº¦æ¡æ§åˆ¶
        function handleProgressClick(e) {
            const rect = progressBar.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));
            
            progressFill.style.width = percentage + '%';
            progressHandle.style.left = percentage + '%';
            
            // è®¡ç®—å¯¹åº”çš„æ—¶é—´ç‚¹
            const targetTime = (percentage / 100) * totalDuration;
            
            // æ›´æ–°æ—¶é—´æ˜¾ç¤º
            updateTimeDisplay(targetTime, totalDuration);
            
            // æ‰¾åˆ°å¯¹åº”çš„åœºæ™¯
            let targetScene = 0;
            for (let i = 0; i < sceneTimestamps.length; i++) {
                if (targetTime >= sceneTimestamps[i]) {
                    targetScene = i;
                } else {
                    break;
                }
            }
            
            // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œè·³è½¬åˆ°ç›®æ ‡åœºæ™¯
            if (isPlaying) {
                // åœæ­¢å½“å‰éŸ³é¢‘
                if (currentScene < audioElements.length && audioElements[currentScene]) {
                    audioElements[currentScene].pause();
                }
                
                // è®¡ç®—åœ¨ç›®æ ‡åœºæ™¯ä¸­çš„æ—¶é—´åç§»
                const sceneOffset = targetTime - sceneTimestamps[targetScene];
                
                // æ’­æ”¾ç›®æ ‡åœºæ™¯
                currentScene = targetScene;
                const scene = scenes[targetScene];
                const audio = audioElements[targetScene];
                
                // æ›´æ–°å­—å¹•å’ŒåŠ¨ç”»
                subtitle.textContent = scene.subtitle;
                subtitle.classList.add('active');
                scene.action();
                
                // æ’­æ”¾éŸ³é¢‘ï¼ˆä»æŒ‡å®šæ—¶é—´ç‚¹å¼€å§‹ï¼‰
                if (audio && !isMuted) {
                    audio.currentTime = sceneOffset / 1000; // è½¬æ¢ä¸ºç§’
                    audio.play().catch(e => console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', e));
                    
                    // éŸ³é¢‘ç»“æŸæ—¶æ’­æ”¾ä¸‹ä¸€ä¸ªåœºæ™¯
                    audio.onended = () => {
                        subtitle.classList.remove('active');
                        playScene(currentScene + 1);
                    };
                } else {
                    // å¦‚æœé™éŸ³æˆ–æ²¡æœ‰éŸ³é¢‘ï¼Œä½¿ç”¨å®šæ—¶å™¨
                    setTimeout(() => {
                        subtitle.classList.remove('active');
                        playScene(currentScene + 1);
                    }, scene.duration - sceneOffset);
                }
            }
        }
        
        // äº‹ä»¶ç›‘å¬
        playBtn.addEventListener('click', () => {
            if (isPlaying) {
                pauseAnimation();
            } else {
                startAnimation();
            }
        });
        
        muteBtn.addEventListener('click', toggleMute);
        progressBar.addEventListener('click', handleProgressClick);
        
        // è¿›åº¦æ¡æ‹–åŠ¨
        progressHandle.addEventListener('mousedown', () => isDragging = true);
        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                handleProgressClick(e);
            }
        });
        document.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
            }
        });
        
        // åˆå§‹åŒ–
        window.addEventListener('load', () => {
            preloadAllAudio();
        });
    </script>
</body>
</html>