
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¦‚ä½•è®¡ç®—åˆ‡çº¿å’Œæ±‚å¯¼ - Study11</title>
    <link rel="stylesheet" href="animation-player.css">

    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- GeoGebra -->
    <script src="https://www.geogebra.org/apps/deployggb.js"></script>
</head>
<body>
<div class="main-container">
    <!-- Loading ç•Œé¢ -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">æ­£åœ¨åŠ è½½...</div>
        <div class="loading-progress">
            <div class="loading-progress-bar">
                <div class="loading-progress-fill" id="loadingProgressFill"></div>
            </div>
            <div class="loading-progress-text" id="loadingProgressText">è¿›åº¦: 0 / 0ï¼ˆ0%ï¼‰</div>
        </div>
    </div>

    <!-- åŠ¨ç”»å®¹å™¨ -->
    <div class="animation-container">
        <div class="cache-indicator" id="cacheIndicator">ä½¿ç”¨ç¼“å­˜éŸ³é¢‘</div>
        <div class="scene-number" id="sceneNumber">1</div>

        <!-- SVG åœºæ™¯å®¹å™¨ -->
        <svg class="trig-scene" viewBox="0 0 1600 800">
            <!-- æ¸å˜å®šä¹‰ -->
            <defs>
                <linearGradient id="tangentGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1"/>
                    <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1"/>
                </linearGradient>
                <linearGradient id="functionGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#3498db;stop-opacity:1"/>
                    <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1"/>
                </linearGradient>
            </defs>

            <!-- åœºæ™¯æ ‡é¢˜ -->
            <text x="1600" y="50" text-anchor="middle" fill="#2c3e50" font-size="32" font-weight="300"
                  class="scene-title" id="sceneTitle">å¯¼æ•°æ¦‚å¿µå¼•å…¥
            </text>

            <g id="visualPanel">
                <!-- Scene 1: å¯¼æ•°æ¦‚å¿µå¼•å…¥ -->
                <g id="scene1">
                    <rect x="200" y="150" width="1200" height="500" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#3498db" stroke-width="2" rx="15"/>
                    <text x="800" y="250" text-anchor="middle" fill="#2c3e50" font-size="36" font-weight="bold">
                        åˆ‡çº¿ä¸å¯¼æ•°
                    </text>
                    <text x="800" y="350" text-anchor="middle" fill="#2c3e50" font-size="30">
                        åˆ‡çº¿æ˜¯ä¸æ›²çº¿ç›¸åˆ‡çš„ç›´çº¿
                    </text>
                    <text x="800" y="420" text-anchor="middle" fill="#2c3e50" font-size="30">
                        å¯¼æ•°æ˜¯å‡½æ•°åœ¨æŸç‚¹çš„ç¬æ—¶å˜åŒ–ç‡
                    </text>
                    <text x="800" y="490" text-anchor="middle" fill="#2c3e50" font-size="30">
                        ç†è§£åˆ‡çº¿ä¸å¯¼æ•°çš„å…³ç³»æ˜¯æŒæ¡å¾®ç§¯åˆ†çš„åŸºç¡€
                    </text>
                </g>

                <!-- Scene 2: åˆ‡çº¿çš„å‡ ä½•æ„ä¹‰ -->
                <g id="scene2" style="display: none;">
                    <foreignObject x="200" y="100" width="1200" height="600">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="ggbApplet2" style="width: 100%; height: 100%; border-radius: 10px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 3: å¯¼æ•°çš„æ•°å­¦å®šä¹‰ -->
                <g id="scene3" style="display: none;">
                    <rect x="200" y="150" width="1200" height="500" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#e74c3c" stroke-width="2" rx="15"/>
                    <foreignObject x="300" y="200" width="1000" height="100">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="html-formula3" style="font-size: 36px; text-align: center; padding-top: 30px;"></div>
                        </div>
                    </foreignObject>
                    <text x="800" y="380" text-anchor="middle" fill="#2c3e50" font-size="30">
                        å¯¼æ•°å®šä¹‰ä¸ºå‡½æ•°å¢é‡ä¸è‡ªå˜é‡å¢é‡æ¯”å€¼çš„æé™
                    </text>
                    <text x="800" y="450" text-anchor="middle" fill="#2c3e50" font-size="30">
                        å½“Î”xè¶‹è¿‘äº0æ—¶ï¼Œå‰²çº¿æ–œç‡è¶‹è¿‘äºåˆ‡çº¿æ–œç‡
                    </text>
                </g>

                <!-- Scene 4: åŸºæœ¬æ±‚å¯¼å…¬å¼ -->
                <g id="scene4" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#2ecc71" stroke-width="2" rx="15"/>
                    <foreignObject x="200" y="150" width="1200" height="500">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="html-formula4" style="font-size: 30px; padding: 30px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 5: å››åˆ™è¿ç®—æ±‚å¯¼æ³•åˆ™ -->
                <g id="scene5" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#f39c12" stroke-width="2" rx="15"/>
                    <foreignObject x="200" y="150" width="1200" height="500">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="html-formula5" style="font-size: 30px; padding: 30px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 6: å¤åˆå‡½æ•°æ±‚å¯¼ -->
                <g id="scene6" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#9b59b6" stroke-width="2" rx="15"/>
                    <foreignObject x="200" y="150" width="1200" height="500">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="html-formula6" style="font-size: 30px; padding: 30px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 7: éšå‡½æ•°æ±‚å¯¼æ³• -->
                <g id="scene7" style="display: none;">
                    <foreignObject x="200" y="100" width="1200" height="600">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="ggbApplet7" style="width: 100%; height: 100%; border-radius: 10px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 8: å‚æ•°æ–¹ç¨‹æ±‚å¯¼ -->
                <g id="scene8" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#1abc9c" stroke-width="2" rx="15"/>
                    <foreignObject x="200" y="150" width="1200" height="500">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="html-formula8" style="font-size: 30px; padding: 30px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 9: é«˜é˜¶å¯¼æ•°æ¦‚å¿µ -->
                <g id="scene9" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#d35400" stroke-width="2" rx="15"/>
                    <foreignObject x="200" y="150" width="1200" height="500">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="html-formula9" style="font-size: 30px; padding: 30px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 10: åˆ‡çº¿æ–¹ç¨‹æ±‚æ³• -->
                <g id="scene10" style="display: none;">
                    <foreignObject x="200" y="100" width="1200" height="600">
                        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%;">
                            <div id="ggbApplet10" style="width: 100%; height: 100%; border-radius: 10px;"></div>
                        </div>
                    </foreignObject>
                </g>

                <!-- Scene 11: å®é™…åº”ç”¨ç¤ºä¾‹ -->
                <g id="scene11" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#34495e" stroke-width="2" rx="15"/>
                    <text x="800" y="180" text-anchor="middle" fill="#2c3e50" font-size="32" font-weight="bold">
                        å®é™…åº”ç”¨ç¤ºä¾‹
                    </text>
                    <text x="800" y="250" text-anchor="middle" fill="#2c3e50" font-size="30">
                        1. æ±‚æŠ›ç‰©çº¿y=xÂ²åœ¨ç‚¹(2,4)å¤„çš„åˆ‡çº¿æ–¹ç¨‹
                    </text>
                    <text x="800" y="320" text-anchor="middle" fill="#2c3e50" font-size="30">
                        2. æ±‚å‡½æ•°f(x)=sin(2x)çš„å¯¼æ•°
                    </text>
                    <text x="800" y="390" text-anchor="middle" fill="#2c3e50" font-size="30">
                        3. æ±‚åœ†xÂ²+yÂ²=25åœ¨ç‚¹(3,4)å¤„çš„åˆ‡çº¿æ–œç‡
                    </text>
                </g>

                <!-- Scene 12: å¸¸è§é”™è¯¯æé†’ -->
                <g id="scene12" style="display: none;">
                    <rect x="150" y="100" width="1300" height="600" fill="rgba(236, 240, 241, 0.95)"
                          stroke="#e74c3c" stroke-width="2" rx="15"/>
                    <text x="800" y="180" text-anchor="middle" fill="#e74c3c" font-size="32" font-weight="bold">
                        å¸¸è§é”™è¯¯æé†’
                    </text>
                    <text x="800" y="250" text-anchor="middle" fill="#2c3e50" font-size="30">
                        â€¢ å¿˜è®°ä½¿ç”¨é“¾å¼æ³•åˆ™
                    </text>
                    <text x="800" y="320" text-anchor="middle" fill="#2c3e50" font-size="30">
                        â€¢ é™¤æ³•æ³•åˆ™ä¸­å¿˜è®°å¹³æ–¹åˆ†æ¯
                    </text>
                    <text x="800" y="390" text-anchor="middle" fill="#2c3e50" font-size="30">
                        â€¢ æ··æ·†å¹‚å‡½æ•°ä¸æŒ‡æ•°å‡½æ•°æ±‚å¯¼å…¬å¼
                    </text>
                    <text x="800" y="460" text-anchor="middle" fill="#2c3e50" font-size="30">
                        â€¢ éšå‡½æ•°æ±‚å¯¼æ—¶å¿½ç•¥yæ˜¯xçš„å‡½æ•°
                    </text>
                </g>
            </g>
        </svg>
    </div>

    <!-- å­—å¹•å®¹å™¨ -->
    <div class="subtitle-container">
        <div class="subtitle" id="subtitle"></div>
    </div>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="controls">
        <button class="control-btn" id="playBtn" title="æ’­æ”¾/æš‚åœ" disabled>
            <span id="playIcon">â–¶</span>
        </button>
        <button class="control-btn" id="muteBtn" title="é™éŸ³">
            <span id="muteIcon">ğŸ”Š</span>
        </button>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
                <div class="progress-handle" id="progressHandle"></div>
            </div>
            <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
        </div>
        <div class="scene-buttons" id="sceneButtons"></div>
    </div>
</div>

<!-- é¡µè„š -->
<div class="footer">
    <a href="https://study11.ai">Â© 2025 study11 lab</a>
</div>

<!-- éŸ³é¢‘å®¹å™¨ -->
<div id="audioContainer"></div>

<!-- å¼•å…¥è„šæœ¬ -->
<script src="animation-player-utils.js"></script>
<script src="player-control.js"></script>
<script>
    // ===== å®Œæ•´çš„åœºæ™¯é…ç½® =====
    const allScenes = [
        // Scene 1: å¯¼æ•°æ¦‚å¿µå¼•å…¥
        {
            title: "å¯¼æ•°æ¦‚å¿µå¼•å…¥",
            subtitle: "åŒå­¦ä»¬å¥½ï¼Œä»Šå¤©æˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯å¾®ç§¯åˆ†ä¸­çš„é‡è¦æ¦‚å¿µï¼šåˆ‡çº¿å’Œå¯¼æ•°ã€‚åœ¨å‡ ä½•å­¦ä¸­ï¼Œåˆ‡çº¿æ˜¯ä¸æ›²çº¿ç›¸åˆ‡çš„ç›´çº¿ï¼Œå®ƒåœ¨åˆ‡ç‚¹å¤„ä¸æ›²çº¿æœ‰ç›¸åŒçš„æ–œç‡ã€‚å¯¼æ•°åˆ™æ˜¯å‡½æ•°åœ¨æŸä¸€ç‚¹çš„ç¬æ—¶å˜åŒ–ç‡ï¼Œå®ƒæè¿°äº†å‡½æ•°å€¼éšè‡ªå˜é‡å˜åŒ–çš„å¿«æ…¢ç¨‹åº¦ã€‚ç†è§£åˆ‡çº¿å’Œå¯¼æ•°çš„å…³ç³»æ˜¯æŒæ¡å¾®ç§¯åˆ†çš„åŸºç¡€ã€‚",
            action: () => showScene(1, "å¯¼æ•°æ¦‚å¿µå¼•å…¥")
        },

        // Scene 2: åˆ‡çº¿çš„å‡ ä½•æ„ä¹‰
        {
            title: "åˆ‡çº¿çš„å‡ ä½•æ„ä¹‰",
            subtitle: "è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„å‡½æ•°å›¾åƒæ¥ç†è§£åˆ‡çº¿çš„æ¦‚å¿µã€‚åˆ‡çº¿æ˜¯é€šè¿‡æ›²çº¿ä¸ŠæŸä¸€ç‚¹çš„ç›´çº¿ï¼Œä¸”åœ¨è¯¥ç‚¹é™„è¿‘ä¸æ›²çº¿æœ€æ¥è¿‘ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å‰²çº¿é€¼è¿‘çš„æ–¹æ³•æ¥ç†è§£åˆ‡çº¿ï¼šå½“å‰²çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ— é™æ¥è¿‘æ—¶ï¼Œå‰²çº¿å°±å˜æˆäº†åˆ‡çº¿ã€‚åˆ‡çº¿çš„æ–œç‡å°±æ˜¯å‡½æ•°åœ¨è¯¥ç‚¹çš„å¯¼æ•°å€¼ã€‚",
            isGeoGebra: true,
            ggbAppletId: 'ggbApplet2',
            setupGeoGebra: () => {
                const parameters = {
                    "appName": "classic",
                    "width": 1200,
                    "height": 600,
                    "showToolBar": false,
                    "showAlgebraInput": false,
                    "showMenuBar": false,
                    "language": "zh_CN",
                    "appletOnLoad": function (api) {
                        api.setPerspective('G');
                        api.setAxesVisible(true, true);
                        api.setGridVisible(true);
                        api.setCoordSystem(-3, 5, -2, 10);

                        // ç»˜åˆ¶å‡½æ•° y = x^2
                        api.evalCommand('f(x) = x^2');
                        api.setColor('f', 52, 152, 219);
                        api.setLineThickness('f', 3);

                        // åˆ‡ç‚¹
                        api.evalCommand('A = (1, 1)');
                        api.setColor('A', 231, 76, 60);
                        api.setPointSize('A', 5);

                        // åˆ‡çº¿
                        api.evalCommand('t(x) = 2x - 1');
                        api.setColor('t', 231, 76, 60);
                        api.setLineThickness('t', 3);

                        // å‰²çº¿ç‚¹
                        api.evalCommand('B = (2, 4)');
                        api.setColor('B', 46, 204, 113);
                        api.setPointSize('B', 4);

                        // å‰²çº¿
                        api.evalCommand('s(x) = (4-1)/(2-1) * (x-1) + 1');
                        api.setColor('s', 46, 204, 113);
                        api.setLineThickness('s', 2);
                        api.setLineStyle('s', 2);

                        // æ·»åŠ æ ‡ç­¾
                        api.evalCommand('Text1 = Text("åˆ‡ç‚¹", (1.2, 1.2))');
                        api.setColor('Text1', 231, 76, 60);

                        api.evalCommand('Text2 = Text("å‰²çº¿ç‚¹", (2.2, 4.2))');
                        api.setColor('Text2', 46, 204, 113);
                    }
                };
                const applet = new GGBApplet(parameters, true);
                applet.inject('ggbApplet2');
            },
            action: () => showScene(2, "åˆ‡çº¿çš„å‡ ä½•æ„ä¹‰")
        },

        // Scene 3: å¯¼æ•°çš„æ•°å­¦å®šä¹‰
        {
            title: "å¯¼æ•°çš„æ•°å­¦å®šä¹‰",
            subtitle: "å¯¼æ•°çš„ä¸¥æ ¼æ•°å­¦å®šä¹‰æ˜¯é€šè¿‡æé™æ¥è¡¨è¾¾çš„ã€‚è®¾å‡½æ•°y=f(x)ï¼Œåœ¨ç‚¹xâ‚€å¤„çš„å¯¼æ•°å®šä¹‰ä¸ºï¼šf'(xâ‚€)=lim(Î”xâ†’0)[f(xâ‚€+Î”x)-f(xâ‚€)]/Î”xã€‚è¿™ä¸ªå…¬å¼è¡¨ç¤ºå½“è‡ªå˜é‡çš„å¢é‡è¶‹è¿‘äºé›¶æ—¶ï¼Œå‡½æ•°å¢é‡ä¸è‡ªå˜é‡å¢é‡æ¯”å€¼çš„æé™ã€‚è¿™å°±æ˜¯å¯¼æ•°çš„æœ¬è´¨å®šä¹‰ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è®¡ç®—å¯¼æ•°çš„åŸºç¡€ã€‚",
            action: () => showScene(3, "å¯¼æ•°çš„æ•°å­¦å®šä¹‰")
        },

        // Scene 4: åŸºæœ¬æ±‚å¯¼å…¬å¼
        {
            title: "åŸºæœ¬æ±‚å¯¼å…¬å¼",
            subtitle: "ä¸ºäº†ä¾¿äºè®¡ç®—ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡ä¸€äº›åŸºæœ¬çš„æ±‚å¯¼å…¬å¼ã€‚å¸¸æ•°å‡½æ•°çš„å¯¼æ•°ä¸ºé›¶ï¼Œå³(c)'=0ã€‚å¹‚å‡½æ•°çš„å¯¼æ•°å…¬å¼ä¸º(xâ¿)'=nx^(n-1)ã€‚ä¸‰è§’å‡½æ•°çš„å¯¼æ•°ï¼š(sin x)'=cos xï¼Œ(cos x)'=-sin xã€‚æŒ‡æ•°å‡½æ•°å’Œå¯¹æ•°å‡½æ•°çš„å¯¼æ•°ä¹Ÿéœ€è¦è®°ä½ï¼Œè¿™äº›æ˜¯æ±‚å¯¼è¿ç®—çš„åŸºç¡€å·¥å…·ã€‚",
            action: () => showScene(4, "åŸºæœ¬æ±‚å¯¼å…¬å¼")
        },

        // Scene 5: å››åˆ™è¿ç®—æ±‚å¯¼æ³•åˆ™
        {
            title: "å››åˆ™è¿ç®—æ±‚å¯¼æ³•åˆ™",
            subtitle: "å½“å‡½æ•°è¿›è¡ŒåŠ å‡ä¹˜é™¤è¿ç®—æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç›¸åº”çš„æ±‚å¯¼æ³•åˆ™ã€‚åŠ æ³•æ³•åˆ™ï¼š[f(x)+g(x)]'=f'(x)+g'(x)ã€‚å‡æ³•æ³•åˆ™ï¼š[f(x)-g(x)]'=f'(x)-g'(x)ã€‚ä¹˜æ³•æ³•åˆ™ï¼š[f(x)Â·g(x)]'=f'(x)Â·g(x)+f(x)Â·g'(x)ã€‚é™¤æ³•æ³•åˆ™ï¼š[f(x)/g(x)]'=[f'(x)Â·g(x)-f(x)Â·g'(x)]/[g(x)]Â²ã€‚",
            action: () => showScene(5, "å››åˆ™è¿ç®—æ±‚å¯¼æ³•åˆ™")
        },

        // Scene 6: å¤åˆå‡½æ•°æ±‚å¯¼
        {
            title: "å¤åˆå‡½æ•°æ±‚å¯¼",
            subtitle: "å¤åˆå‡½æ•°çš„æ±‚å¯¼éœ€è¦ç”¨åˆ°é“¾å¼æ³•åˆ™ï¼Œè¿™æ˜¯æ±‚å¯¼è¿ç®—ä¸­çš„é‡è¦æŠ€å·§ã€‚é“¾å¼æ³•åˆ™çš„å…¬å¼ä¸ºï¼š[f(g(x))]'=f'(g(x))Â·g'(x)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤–å‡½æ•°çš„å¯¼æ•°ä¹˜ä»¥å†…å‡½æ•°çš„å¯¼æ•°ã€‚ä¾‹å¦‚æ±‚sin(xÂ²)çš„å¯¼æ•°ï¼Œå¤–å‡½æ•°æ˜¯sin uï¼Œå†…å‡½æ•°æ˜¯u=xÂ²ï¼Œåº”ç”¨é“¾å¼æ³•åˆ™å¾—åˆ°ç»“æœã€‚",
            action: () => showScene(6, "å¤åˆå‡½æ•°æ±‚å¯¼")
        },

        // Scene 7: éšå‡½æ•°æ±‚å¯¼æ³•
        {
            title: "éšå‡½æ•°æ±‚å¯¼æ³•",
            subtitle: "æœ‰äº›å‡½æ•°å…³ç³»å¼ä¸æ˜¯æ˜¾å¼è¡¨è¾¾çš„ï¼Œè€Œæ˜¯ä»¥æ–¹ç¨‹å½¢å¼ç»™å‡ºï¼Œè¿™å°±æ˜¯éšå‡½æ•°ã€‚å¯¹äºéšå‡½æ•°F(x,y)=0ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç­‰å¼ä¸¤è¾¹åŒæ—¶æ±‚å¯¼ã€‚åœ¨æ±‚å¯¼è¿‡ç¨‹ä¸­ï¼Œyè¢«è§†ä¸ºxçš„å‡½æ•°ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨é“¾å¼æ³•åˆ™ã€‚ä¾‹å¦‚å¯¹äºxÂ²+yÂ²=1ï¼Œä¸¤è¾¹å¯¹xæ±‚å¯¼å¯å¾—åˆ‡çº¿æ–œç‡ã€‚",
            isGeoGebra: true,
            ggbAppletId: 'ggbApplet7',
            setupGeoGebra: () => {
                const parameters = {
                    "appName": "classic",
                    "width": 1200,
                    "height": 600,
                    "showToolBar": false,
                    "showAlgebraInput": false,
                    "showMenuBar": false,
                    "language": "zh_CN",
                    "appletOnLoad": function (api) {
                        api.setPerspective('G');
                        api.setAxesVisible(true, true);
                        api.setGridVisible(true);
                        api.setCoordSystem(-2, 2, -2, 2);

                        // ç»˜åˆ¶å•ä½åœ†
                        api.evalCommand('Circle((0,0), 1)');

                        // åˆ‡ç‚¹
                        api.evalCommand('P = (0.6, 0.8)');
                        api.setColor('P', 231, 76, 60);
                        api.setPointSize('P', 5);

                        // åˆ‡çº¿
                        api.evalCommand('t(x) = -0.75x + 1.25');
                        api.setColor('t', 231, 76, 60);
                        api.setLineThickness('t', 3);

                        // æ·»åŠ æ ‡ç­¾
                        api.evalCommand('Text1 = Text("xÂ² + yÂ² = 1", (-1.5, 1.7))');
                        api.evalCommand('Text2 = Text("åˆ‡ç‚¹P(0.6, 0.8)", (0.7, 1.0))');
                        api.setColor('Text2', 231, 76, 60);
                    }
                };
                const applet = new GGBApplet(parameters, true);
                applet.inject('ggbApplet7');
            },
            action: () => showScene(7, "éšå‡½æ•°æ±‚å¯¼æ³•")
        },

        // Scene 8: å‚æ•°æ–¹ç¨‹æ±‚å¯¼
        {
            title: "å‚æ•°æ–¹ç¨‹æ±‚å¯¼",
            subtitle: "å½“å‡½æ•°ç”¨å‚æ•°æ–¹ç¨‹è¡¨ç¤ºæ—¶ï¼Œæ±‚å¯¼éœ€è¦ç‰¹æ®Šçš„æ–¹æ³•ã€‚å¦‚æœx=x(t)ï¼Œy=y(t)ï¼Œé‚£ä¹ˆdy/dx=(dy/dt)/(dx/dt)ã€‚è¿™ä¸ªå…¬å¼è¡¨æ˜å‚æ•°æ–¹ç¨‹çš„å¯¼æ•°ç­‰äºyå¯¹å‚æ•°çš„å¯¼æ•°é™¤ä»¥xå¯¹å‚æ•°çš„å¯¼æ•°ã€‚è¿™ç§æ–¹æ³•åœ¨å¤„ç†æ›²çº¿è¿åŠ¨ç­‰é—®é¢˜æ—¶éå¸¸æœ‰ç”¨ã€‚",
            action: () => showScene(8, "å‚æ•°æ–¹ç¨‹æ±‚å¯¼")
        },

        // Scene 9: é«˜é˜¶å¯¼æ•°æ¦‚å¿µ
        {
            title: "é«˜é˜¶å¯¼æ•°æ¦‚å¿µ",
            subtitle: "å¯¼æ•°çš„å¯¼æ•°ç§°ä¸ºäºŒé˜¶å¯¼æ•°ï¼Œè®°ä½œf''(x)æˆ–dÂ²y/dxÂ²ã€‚äºŒé˜¶å¯¼æ•°æè¿°äº†å‡½æ•°æ–œç‡å˜åŒ–çš„å¿«æ…¢ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°çš„å‡¹å‡¸æ€§ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸‰é˜¶å¯¼æ•°ã€å››é˜¶å¯¼æ•°ç­‰é«˜é˜¶å¯¼æ•°ã€‚é«˜é˜¶å¯¼æ•°åœ¨ç‰©ç†å’Œå·¥ç¨‹ä¸­æœ‰é‡è¦åº”ç”¨ï¼Œæ¯”å¦‚åŠ é€Ÿåº¦å°±æ˜¯é€Ÿåº¦çš„å¯¼æ•°ã€‚",
            action: () => showScene(9, "é«˜é˜¶å¯¼æ•°æ¦‚å¿µ")
        },

        // Scene 10: åˆ‡çº¿æ–¹ç¨‹æ±‚æ³•
        {
            title: "åˆ‡çº¿æ–¹ç¨‹æ±‚æ³•",
            subtitle: "å·²çŸ¥å‡½æ•°åœ¨æŸç‚¹çš„å¯¼æ•°åï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºåˆ‡çº¿æ–¹ç¨‹ã€‚åˆ‡çº¿æ–¹ç¨‹çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼šy-yâ‚€=f'(xâ‚€)(x-xâ‚€)ã€‚è¿™é‡Œ(xâ‚€,yâ‚€)æ˜¯åˆ‡ç‚¹åæ ‡ï¼Œf'(xâ‚€)æ˜¯åˆ‡çº¿æ–œç‡ã€‚ä¾‹å¦‚å¯¹äºf(x)=xÂ²åœ¨ç‚¹(1,1)å¤„ï¼Œf'(1)=2ï¼Œå› æ­¤åˆ‡çº¿æ–¹ç¨‹ä¸ºy-1=2(x-1)ï¼Œå³y=2x-1ã€‚",
            isGeoGebra: true,
            ggbAppletId: 'ggbApplet10',
            setupGeoGebra: () => {
                const parameters = {
                    "appName": "classic",
                    "width": 1200,
                    "height": 600,
                    "showToolBar": false,
                    "showAlgebraInput": false,
                    "showMenuBar": false,
                    "language": "zh_CN",
                    "appletOnLoad": function (api) {
                        api.setPerspective('G');
                        api.setAxesVisible(true, true);
                        api.setGridVisible(true);
                        api.setCoordSystem(-1, 3, -1, 5);

                        // ç»˜åˆ¶å‡½æ•° y = x^2
                        api.evalCommand('f(x) = x^2');
                        api.setColor('f', 52, 152, 219);
                        api.setLineThickness('f', 3);

                        // åˆ‡ç‚¹
                        api.evalCommand('A = (1, 1)');
                        api.setColor('A', 231, 76, 60);
                        api.setPointSize('A', 5);

                        // åˆ‡çº¿
                        api.evalCommand('t(x) = 2x - 1');
                        api.setColor('t', 231, 76, 60);
                        api.setLineThickness('t', 3);

                        // æ·»åŠ æ ‡ç­¾
                        api.evalCommand('Text1 = Text("f(x) = xÂ²", (2.2, 4.2))');
                        api.evalCommand('Text2 = Text("åˆ‡çº¿: y = 2x - 1", (2.2, 3.5))');
                        api.setColor('Text1', 52, 152, 219);
                        api.setColor('Text2', 231, 76, 60);
                    }
                };
                const applet = new GGBApplet(parameters, true);
                applet.inject('ggbApplet10');
            },
            action: () => showScene(10, "åˆ‡çº¿æ–¹ç¨‹æ±‚æ³•")
        },

        // Scene 11: å®é™…åº”ç”¨ç¤ºä¾‹
        {
            title: "å®é™…åº”ç”¨ç¤ºä¾‹",
            subtitle: "è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªå®é™…ä¾‹å­æ¥å·©å›ºæ‰€å­¦çŸ¥è¯†ã€‚ç¬¬ä¸€ä¸ªä¾‹å­ï¼šæ±‚æŠ›ç‰©çº¿y=xÂ²åœ¨ç‚¹(2,4)å¤„çš„åˆ‡çº¿æ–¹ç¨‹ã€‚ç¬¬äºŒä¸ªä¾‹å­ï¼šæ±‚å‡½æ•°f(x)=sin(2x)çš„å¯¼æ•°ã€‚ç¬¬ä¸‰ä¸ªä¾‹å­ï¼šå·²çŸ¥åœ†çš„æ–¹ç¨‹xÂ²+yÂ²=25ï¼Œæ±‚åœ¨ç‚¹(3,4)å¤„çš„åˆ‡çº¿æ–œç‡ã€‚è¿™äº›ä¾‹å­æ¶µç›–äº†æˆ‘ä»¬å­¦åˆ°çš„å„ç§æ±‚å¯¼æ–¹æ³•ã€‚",
            action: () => showScene(11, "å®é™…åº”ç”¨ç¤ºä¾‹")
        },

        // Scene 12: å¸¸è§é”™è¯¯æé†’
        {
            title: "å¸¸è§é”™è¯¯æé†’",
            subtitle: "åœ¨æ±‚å¯¼è¿‡ç¨‹ä¸­ï¼ŒåŒå­¦ä»¬å®¹æ˜“çŠ¯ä¸€äº›å¸¸è§é”™è¯¯ã€‚æ¯”å¦‚å¿˜è®°é“¾å¼æ³•åˆ™ï¼Œé”™è¯¯åœ°è®¤ä¸º(sin x)'=cos xè€Œä¸è€ƒè™‘å†…å‡½æ•°ã€‚è¿˜æœ‰åœ¨é™¤æ³•æ³•åˆ™ä¸­å¿˜è®°å¹³æ–¹åˆ†æ¯ã€‚æ··æ·†å¹‚å‡½æ•°å’ŒæŒ‡æ•°å‡½æ•°çš„æ±‚å¯¼å…¬å¼ä¹Ÿæ˜¯å¸¸è§é—®é¢˜ã€‚ç†è§£è¿™äº›é”™è¯¯æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°æŒæ¡æ­£ç¡®çš„æ±‚å¯¼æ–¹æ³•ã€‚",
            action: () => showScene(12, "å¸¸è§é”™è¯¯æé†’")
        }
    ];

    // æ¸²æŸ“å…¬å¼
    document.addEventListener('DOMContentLoaded', function() {
        // Scene 3: å¯¼æ•°å®šä¹‰å…¬å¼
        katex.render("f'(x_0) = \\lim_{\\Delta x \\to 0} \\frac{f(x_0 + \\Delta x) - f(x_0)}{\\Delta x}",
            document.getElementById('html-formula3'));

        // Scene 4: åŸºæœ¬æ±‚å¯¼å…¬å¼
        const formula4 = `
            <div>å¸¸æ•°å‡½æ•°: $(c)' = 0$</div>
            <div style="margin-top: 15px;">å¹‚å‡½æ•°: $(x^n)' = nx^{n-1}$</div>
            <div style="margin-top: 15px;">ä¸‰è§’å‡½æ•°: $(\\sin x)' = \\cos x$, $(\\cos x)' = -\\sin x$</div>
            <div style="margin-top: 15px;">æŒ‡æ•°å‡½æ•°: $(e^x)' = e^x$, $(a^x)' = a^x \\ln a$</div>
            <div style="margin-top: 15px;">å¯¹æ•°å‡½æ•°: $(\\ln x)' = \\frac{1}{x}$, $(\\log_a x)' = \\frac{1}{x \\ln a}$</div>
        `;
        document.getElementById('html-formula4').innerHTML = formula4;
        renderMathInElement(document.getElementById('html-formula4'), {
            delimiters: [
                { left: "$", right: "$", display: false },
                { left: "$$", right: "$$", display: true }
            ]
        });


        // Scene 5: å››åˆ™è¿ç®—æ³•åˆ™
        const formula5 = `
            <div>åŠ æ³•æ³•åˆ™: $[f(x) + g(x)]' = f'(x) + g'(x)$</div>
            <div style="margin-top: 15px;">å‡æ³•æ³•åˆ™: $[f(x) - g(x)]' = f'(x) - g'(x)$</div>
            <div style="margin-top: 15px;">ä¹˜æ³•æ³•åˆ™: $[f(x) \\cdot g(x)]' = f'(x) \\cdot g(x) + f(x) \\cdot g'(x)$</div>
            <div style="margin-top: 15px;">é™¤æ³•æ³•åˆ™: $\\left[\\frac{f(x)}{g(x)}\\right]' = \\frac{f'(x) \\cdot g(x) - f(x) \\cdot g'(x)}{[g(x)]^2}$</div>
        `;
        document.getElementById('html-formula5').innerHTML = formula5;
        renderMathInElement(document.getElementById('html-formula5'), {
            delimiters: [
                { left: "$", right: "$", display: false },
                { left: "$$", right: "$$", display: true }
            ]
        });

        // Scene 6: é“¾å¼æ³•åˆ™
        const formula6 = `
            <div>é“¾å¼æ³•åˆ™: $[f(g(x))]' = f'(g(x)) \\cdot g'(x)$</div>
            <div style="margin-top: 20px;">ä¾‹å¦‚: $(\\sin(x^2))' = \\cos(x^2) \\cdot 2x$</div>
        `;
        document.getElementById('html-formula6').innerHTML = formula6;
        renderMathInElement(document.getElementById('html-formula6'), {
            delimiters: [
                { left: "$", right: "$", display: false },
                { left: "$$", right: "$$", display: true }
            ]
        });

        // Scene 8: å‚æ•°æ–¹ç¨‹æ±‚å¯¼
        katex.render("\\frac{dy}{dx} = \\frac{dy/dt}{dx/dt}",
            document.getElementById('html-formula8'));

        // Scene 9: é«˜é˜¶å¯¼æ•°
        const formula9 = `
            <div>äºŒé˜¶å¯¼æ•°: $f''(x)$ æˆ– $\\frac{d^2y}{dx^2}$</div>
            <div style="margin-top: 20px;">ä¾‹å¦‚: è‹¥ $f(x) = x^3$ï¼Œåˆ™ $f'(x) = 3x^2$ï¼Œ$f''(x) = 6x$</div>
            <div style="margin-top: 20px;">ç‰©ç†åº”ç”¨: åŠ é€Ÿåº¦ $a = \\frac{dv}{dt} = \\frac{d^2s}{dt^2}$</div>
        `;
        document.getElementById('html-formula9').innerHTML = formula9;
        renderMathInElement(document.getElementById('html-formula9'), {
            delimiters: [
                { left: "$", right: "$", display: false },
                { left: "$$", right: "$$", display: true }
            ]
        });
    });
</script>
</body>
</html>